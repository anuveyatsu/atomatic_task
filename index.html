<html>
  <head>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://trifacta.github.io/vega/vega.js"></script>
    <style>
      * { font-family: Helvetica Neue, Helvetica, Arial, sans-serif; }
      body { width: 450px; line-height: 16pt; }
    </style>
  </head>
  <body>
    <p><strong>Henry Hub Natural Gas Spot Price</strong></p>
    <div id="view" class="view"></div>
  </body>
  <script type="text/javascript">
    var myArray = ["1996", "1997", "1998", "1999", "2000", "2001", "2002", "2003",
                    "2004", "2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012",
                    "2013", "2014", "2015"];
    var spec = {
      "width": 1280,
      "height": 500,
      "padding": {"top": 40, "left": 50, "bottom": 50, "right": 40},
      "data": [{"name" : "points"}],
          "scales": [
                  {
                    "name": "x",
                    "nice": true,
                    "range": "width",
                    "domain": {"data": "points", "field": "data.x"}
                  },
                  {
                    "name": "y",
                    "nice": true,
                    "range": "height",
                    "domain": {"data": "points", "field": "data.y"}
                  }
          ],
          "axes": [
                  {"type": "x", "scale": "x", "title": "Year", "ticks": 20, "values": myArray},
                  {"type": "y", "scale": "y", "title": "Dollars per Million Btu"}
          ],
          "marks": [
                  {
                    "type": "line",
                    "from": {"data": "points"},
                    "properties": {
                      "enter": {
                        "x": {"scale": "x", "field": "data.x"},
                        "y": {"scale": "y", "field": "data.y"},
                        "stroke": {"value": "steelblue"},
                        "fillOpacity": {"value": 0.5}
                      },
                      "update": {
                        "fill": {"value": "transparent"},
                        "size": {"value": 100}
                      },
                      "hover": {
                        "fill": {"value": "pink"},
                        "size": {"value": 300}
                      }
                    }
                  }
          ]
    };

    var data = { "points" : [] };
    d3.csv("data_daily.csv", function(error, mydata){
        for (var i = 0; i < mydata.length; i++) {
          var x = new Date(mydata[i].date);
          var y = parseFloat(mydata[i].price);
          data.points.push({"x":i,"y":y});
        }
    });

    vg.parse.spec(spec, function(chart) {
      var view = chart({el:"#view", data:data})
        .update();
    });
  </script>
</html>
